
<!-- fluid bootstrap container with margins to center page content
considering topnav, sidenav, and footer -->
<div class="container-fluid">

  <!-- outer page container; don't show until data is ready -->
  <div class="page-cont" *ngIf="showPage">

    <div class="projects-filters-cont">

      <div class="projects-filter-label">
        Search By
      </div>

      <div class="projects-filter-dropdown">
        <select class="form-control projects-filter-select" (change)="onFilterByChange($event.target.value)">
          <option *ngFor="let filter of filters" [selected]="filter.displayName === 'Project Name'">{{ filter.displayName }}</option>
        </select>
      </div>

      <div *ngIf="!selectedFilter.isDropdown" class="projects-filter-string">
        <input type="text" #filterStringVC [(ngModel)]="filterString" class="form-control projects-filter-input" (ngModelChange)="onFilterStringChange()" appAutofocus>
        <i class="projects-filter-icon-search fa fa-search"></i>
        <i class="projects-filter-icon-close fa fa-times-circle" (click)="onClearSearchClick()"></i>
      </div>

      <div *ngIf="selectedFilter.isDropdown" class="projects-filter-select">
        <select #filterDropDownVC class="form-control projects-filter-select" (change)="onFilterSelectChange($event.target.value)">
          <option *ngFor="let data of dropDownData[selectedFilter.dropDownArrayIndex]">{{ data[selectedFilter.dropDownProperty] }}</option>
        </select>
      </div>

      <div class="projects-display-count">
        <!-- Showing {{ filteredProjectsCount === 0 ? 'All' : filteredProjectsCount + ' of' }} {{ totalProjectsCount }} Projects -->
        {{ numProjectsDisplayString }}
      </div>

    </div>

    <div class="projects-cards-cont" (scroll)="onScroll()">

      <!-- each row is a project card, with bottom margin separating it from the next one -->
      <div *ngFor="let project of projects | filter : filterString : selectedFilter.columnName : {limitTo: numProjectsToDisplay, matchFuzzy: selectedFilter.matchFuzzy, matchOptimistic: selectedFilter.matchOptimistic, matchExact: selectedFilter.matchExact}" class="row row-custom row-project-card">

        <!-- 12 columns width project card container-->
        <div class="project-card">

          <!-- container for project type (left side element) -->
          <div class="project-type-cont" [ngStyle]="{ 'color': setProjctTypeColor(project.ProjectTypeName) }">

            <!-- project type name text -->
            <div class="project-type-name"> 
              {{ project.ProjectTypeName }}
            </div>

            <!-- project type icon -->
            <div class="project-type-icon"> 
              <i [ngClass]="setProjctTypeIconClass(project.ProjectTypeName)"></i>
            </div>
            
          </div>

          <!-- container for project name, description, etc. (middle element) -->
          <div class="project-details-cont">

            <div class="project-name">
              {{ project.ProjectName }}
            </div>

            <div class="project-description" [attr.data-id]="project.ProjectID" (mouseenter)="onDescriptionMouseEnter(project)" (mouseleave)="onDescriptionMouseLeave(project.ProjectID)">
              {{ project.Description }}
            </div>
            
          </div>


          <!-- container for project status, priority, and department -->
          <div class="project-status-cont">

            <div *ngIf="project.ProjectStatusName" class="project-status">
              <i class="nc-icon nc-todo"></i>
              <div class="project-status-name-text">
                {{ project.ProjectStatusName }}
              </div>
            </div>

            <div *ngIf="project.PriorityName" class="project-priority">
              <i class="nc-icon nc-code-editor"></i>
              <div class="project-priority-name-text">
                {{ project.PriorityName }}
              </div>
            </div>
            
          </div>


          <!-- container for created by and creation date (fourth container) -->
          <div class="project-creation-cont">

            <div class="project-created-by">
              <span class="project-created-by-label">Created By:</span>{{ project.FullName }}
            </div>

            <div class="project-creation-date">
              <span class="project-creation-date-label">Creation Date:</span>{{ project.CreationDate | date:'mediumDate' }}
            </div>
            
          </div>


        </div>

      </div>

    </div>

  </div>  

</div>