<div class="projects-modal-outer-cont" [@modalStateOuter]="outerDivState">
  <div class="projects-modal-inner-cont" [@modalStateInner]="innerDivState" (appClickOutside)="onClickOutside($event)">
    <div class="projects-modal-body">

      <div class="projects-filter-cont">

        <div class="projects-modal-filter">
          <input type="text" [(ngModel)]="filterString" class="form-control projects-filter-input" placeholder="filter" appAutofocus>
        </div>

        <div class="projects-pagination" *ngIf="paginationLinks.length > 1">
          <ul class="pagination">
            <li class="page-item">
              <a class="page-link" (click)="onPaginationArrowClick('left')">
                <span>&laquo;</span>
              </a>
            </li>
            <li class="page-item" *ngFor="let link of paginationLinks; let i=index">
              <a [class]="'page-link' + (i === selectedPage ? ' active' : '')" [attr.data-link]="link" (click)="onPaginationLinkClick(link)">{{ link }}</a>
            </li>
            <li class="page-item">
              <a class="page-link" (click)="onPaginationArrowClick('right')">
                <span>&raquo;</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="projects-modal-close" (click)="onCancelClicked()">
            <i class="nc-icon nc-circle-remove projects-modal-close-button"></i>
          </div>

      </div>

      

      <div class="project-table-cont" (scroll)="onScroll()">   
        
        <app-projects-info-modal [style.display]="showInfoModal ? 'inline' : 'none'" [project]="clickedProjectForInfoModal" (close)="onProjectsInfoModalCloseClick()"></app-projects-info-modal>
        <app-projects-roster-modal [style.display]="showRosterModal ? 'inline' : 'none'" [selectedProject]="clickedProjectForRosterModal" (close)="onProjectsRosterModalCloseClick()"></app-projects-roster-modal>
        
        <div class="cards-cont">
          
          <div class="card" *ngFor="let project of projects | filter :filterString:'ProjectName':{limitTo: numProjectsToDisplay, matchFuzzy: true, paginationFilter: paginateFilter}">
            <div class="card-header-cont">
                <div class="card-header-img" *ngIf="project.avatar">
                  <img class="card-project-avatar" [src]="project.avatar" alt="">
                </div>
              <div class="card-header-text">
                {{ project.ProjectName }}
              </div>
            </div>
            <div class="card-body">
              <h5 class="card-title">{{ project.ProjectTypeName }}</h5>
              <p class="card-text">{{ project.Description }}</p>
            </div>
            <div class="card-buttons-underlay"></div>
            <div class="card-buttons">
              <div class="card-button info" [attr.data-id]="project.ProjectID" (mouseenter)="onCardButtonMouseEnter('Project Info', 'info', project.ProjectID)" (mouseleave)="onCardButtonMouseLeave('info', project.ProjectID)" (click)="onProjectInfoClick($event.target)">
                <i class="fa fa-info" aria-hidden="true"></i>
              </div>
              <div class="card-button roster" [attr.data-id]="project.ProjectID" (mouseenter)="onCardButtonMouseEnter('Project Roster', 'roster', project.ProjectID)" (mouseleave)="onCardButtonMouseLeave('roster', project.ProjectID)" (click)="onProjectRosterClick($event.target)">
                <i class="fa fa-user-circle-o" aria-hidden="true"></i>
              </div>
              <!-- <div class="card-button other" [attr.data-id]="project.ProjectID" (mouseenter)="onCardButtonMouseEnter('Something Else', 'other', project.ProjectID)" (mouseleave)="onCardButtonMouseLeave('other', project.ProjectID)">
                <i class="fa fa-snowflake-o" aria-hidden="true"></i>
              </div> -->
            </div>
            <div class="card-footer">
                <button type="button" *ngIf="publicProjectTypes?.indexOf(project.ProjectTypeName)!=-1 || projectAccessApprovedList?.indexOf(project.ProjectID)!=-1 || projectAccessTeamList?.indexOf(project.ProjectID)!=-1"
                  class="btn btn-outline-success project-select-button" data-toggle="modal" data-target="#projectRoleModal" (click)="onSelectedProject(project)">Select</button>
                <button type="button" *ngIf="publicProjectTypes?.indexOf(project.ProjectTypeName)===-1 && projectAccessSubmittedList?.indexOf(project.ProjectID)===-1 && projectAccessApprovedList?.indexOf(project.ProjectID)===-1 && projectAccessDeniedList?.indexOf(project.ProjectID)===-1 && projectAccessTeamList?.indexOf(project.ProjectID)===-1"
                  class="btn btn-outline-warning project-select-button" (click)="onProjectAccessClick(project, 'Request')">Request Access</button>
                <button type="button" *ngIf="publicProjectTypes?.indexOf(project.ProjectTypeName)===-1 && projectAccessSubmittedList?.indexOf(project.ProjectID)!=-1 && projectAccessTeamList?.indexOf(project.ProjectID)===-1"
                  class="btn btn-outline-info" (click)="onProjectAccessClick(project, 'Submitted')">Access Request Submitted...</button>
                <button type="button" *ngIf="publicProjectTypes?.indexOf(project.ProjectTypeName)===-1 && projectAccessDeniedList?.indexOf(project.ProjectID)!=-1 && projectAccessTeamList?.indexOf(project.ProjectID)===-1" 
                  class="btn btn-outline-danger" (click)="onProjectAccessClick(project, 'Denied')">Access Request DENIED</button>
            </div>
          </div>

        </div>

      </div>

  
    </div>
  </div>
</div>

<!-- Waiting to implement once click outside feature works with modals-->
<!-- <div class="modal" tabindex="-1" role="dialog" id="projectRoleModal">
    <div class="modal-dialog" role="document">
      <div class="modal-content" style="width:150%">
        <div class="modal-header" style="border-bottom: none; height: 2rem;">
          <h5 class="title">Please select your project role</h5>
        </div>
        <div class="modal-body">
          <div class="input-group">
            <form>
              <div class="form-group">
                <label for="formGroupProjectRole">Project Role</label>
                <select class="custom-select" id="formGroupProjectRole">
                  <option>Select a Project Role...</option>
                  <option *ngFor="let role of projectRolesList">{{ role.projectRole }}</option>
                </select>
              </div>
            </form>
            <div class="input-group-append">
              <button type="button" class="btn btn-primary btn-fte-toolbar"><i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp;&nbsp;OK</button>&nbsp;
              <button type="button" class="btn btn-primary btn-fte-toolbar"><i class="fa fa-ban" aria-hidden="true"></i>&nbsp;&nbsp;Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> -->