<div class="container-fluid">

        <!-- spinner -->
        <div class="row row-custom" *ngIf="showSpinner">
          <div class="col-lg-12 col-custom">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32"><g class="nc-icon-wrapper" fill="#111111"><g class="nc-loop_bars-rotate-32" transform="rotate(270 16 16)"> <rect x="14" fill="#111111" width="4" height="7"></rect> <rect x="22.83883" y="3.66117" transform="matrix(0.70711 0.70711 -0.70711 0.70711 12.33883 -15.46625)" fill="#111111" width="4" height="7" style="opacity: 0.4;"></rect> <rect x="25" y="14" fill="#111111" width="7" height="4" style="opacity: 0.4;"></rect> <rect x="22.83883" y="21.33883" transform="matrix(-0.70711 0.70711 -0.70711 -0.70711 59.96625 24.83883)" fill="#111111" width="4" height="7" style="opacity: 0.4;"></rect> <rect x="14" y="25" fill="#111111" width="4" height="7" style="opacity: 0.4;"></rect> <rect x="5.16117" y="21.33883" transform="matrix(-0.70711 -0.70711 0.70711 -0.70711 -5.33883 47.46625)" fill="#111111" width="4" height="7" style="opacity: 0.4;"></rect> <rect x="0" y="14" fill="#111111" width="7" height="4" style="opacity: 0.6;"></rect> <rect x="5.16117" y="3.66117" transform="matrix(0.70711 -0.70711 0.70711 0.70711 -2.96625 7.16117)" fill="#111111" width="4" height="7" style="opacity: 0.8;"></rect> </g> <script>!function(){function t(t){this.element=t,this.animationId,this.start=null,this.init()}if(!window.requestAnimationFrame){var i=null;window.requestAnimationFrame=function(t,n){var e=(new Date).getTime();i||(i=e);var a=Math.max(0,16-(e-i)),o=window.setTimeout(function(){t(e+a)},a);return i=e+a,o}}t.prototype.init=function(){var t=this;this.animationId=window.requestAnimationFrame(t.triggerAnimation.bind(t))},t.prototype.reset=function(){var t=this;window.cancelAnimationFrame(t.animationId)},t.prototype.triggerAnimation=function(t){var i=this;this.start||(this.start=t);var n=t-this.start;800>n||(this.start=this.start+800),this.element.setAttribute("transform","rotate("+parseInt(Math.min(n/100,8))%8*45+" 16 16)");if(document.documentElement.contains(this.element))window.requestAnimationFrame(i.triggerAnimation.bind(i))};var n=document.getElementsByClassName("nc-loop_bars-rotate-32"),e=[];if(n)for(var a=0;n.length>a;a++)!function(i){e.push(new t(n[i]))}(a);document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState?e.forEach(function(t){t.reset()}):e.forEach(function(t){t.init()})})}();</script></g></svg>
          </div>
        </div>
      
        <!-- outer page container; don't show until data is ready -->
        <div class="page-cont" *ngIf="showPage">
      
          <!-- Top Row -->
          <div class="projects-search-cont">
      
            <!-- <app-advanced-filters-typeahead></app-advanced-filters-typeahead> -->
      
            <div class="projects-search-label">
              Search
            </div>
          
            <!-- Search Input -->
            <div class="projects-search-string">
              <!-- <input type="text" #filterStringVC [(ngModel)]="filterString" class="form-control projects-search-input" (ngModelChange)="onFilterStringChange()" (keydown)="onFilterStringKeydown($event)" (focusout)="onFilterLostFocus()" appAutofocus> -->
              <input type="text" #filterStringVC class="form-control projects-search-input" name="filterString" [(ngModel)]="filterString" appAutofocus>      
              <i class="projects-search-icon-search fa fa-search"></i>
              <i class="projects-search-icon-close fa fa-times-circle" (click)="onClearSearchClick()"></i>
            </div>
            
            <!-- Test Button -->
            <button class="btn btn-primary" (click)="onTestFormClick()">Test Form Data</button>
      
            <!-- Filter Badges -->
            <ng-container *ngFor="let checkbox of filterCheckedArray; let a = index">
              <div class="badge badge-light">
                <!-- <i class="fa fa-times-circle filters-badge-icon" [attr.title]="checkbox" (click)="onBadgeCloseClick($event)"></i>   -->
                {{ checkbox }}
              </div>
            </ng-container>
      
            <!-- Export Button -->
            <div class="float-right-cont">
      
              <button class="btn-standard icon-text-only hover-green export-button" (mouseenter)="onExportButtonMouseEnter()" (mouseleave)="onExportButtonMouseLeave()" (click)="onExportClick()">
                <i class="fa fa-download button-icon"></i>
                Export
                <span class="downloading-animated-icon" [hidden]="!showDownloadingIcon"> 
                  <svg viewBox="0 0 16 16" width="16" height="16"><title>ripples</title><g class="nc-icon-wrapper" fill="#4ad21c"><g class="nc-loop_ripples-16"> <circle fill="#4ad21c" cx="8" cy="8" r="8" transform="translate(0.5344666667779281 0.5344666667779281) scale(0.933191666652759)" style="opacity:0.33404166673620506;"></circle> </g> <script>!function(){function t(t){this.element=t,this.circle=this.element.getElementsByTagName("circle")[0],this.animationId,this.start=null,this.init()}if(!window.requestAnimationFrame){var i=null;window.requestAnimationFrame=function(t,n){var e=(new Date).getTime();i||(i=e);var a=Math.max(0,16-(e-i)),r=window.setTimeout(function(){t(e+a)},a);return i=e+a,r}}t.prototype.init=function(){var t=this;this.animationId=window.requestAnimationFrame(t.triggerAnimation.bind(t))},t.prototype.reset=function(){var t=this;window.cancelAnimationFrame(t.animationId)},t.prototype.triggerAnimation=function(t){var i=this;this.start||(this.start=t);var n=t-this.start,e=Math.min(n/800,1);800>n||(this.start=this.start+800);var a=.3+5*e/7;if(.3+e>1)(a=.8+2*(e-.7)/3);var r=8*(1-(a=Math.min(a,1))),o=8*(1-a),s=10*e/7;if(.3+e>1)(s=Math.max(1-10/3*(e-.7),0));this.circle.setAttribute("transform","translate("+r+" "+o+") scale("+a+")"),this.circle.setAttribute("style","opacity:"+s+";");if(document.documentElement.contains(this.element))window.requestAnimationFrame(i.triggerAnimation.bind(i))};var n=document.getElementsByClassName("nc-loop_ripples-16"),e=[];if(n)for(var a=0;n.length>a;a++)!function(i){e.push(new t(n[i]))}(a);document.addEventListener("visibilitychange",function(){"hidden"==document.visibilityState?e.forEach(function(t){t.reset()}):e.forEach(function(t){t.init()})})}(); </script></g></svg>
                </span>
              </button>
      
              <!-- <div class="projects-display-count">
                {{ numProjectsDisplayString }}
              </div> -->
      
            </div>
      
          </div>
      
          <!-- Filter Column -->
            <div class="d-inline-flex justify-content-start" style="width:402px">
      
              <!-- General Project Filters -->
              <div class="adv-filters-cont">
                <!-- ProjectTypes -->
                <div class="filter-headers" data-toggle="collapse" data-target="#projectTypeFilters">
                  <i class="fa fa-angle-down" aria-hidden="true" style="padding: 0px 10px 0px 3px"></i>
                  Project Types
                </div>
                <div class="filter-collapse show" id="projectTypeFilters">
                  <div class="custom-control custom-checkbox" *ngFor="let projectType of projectTypes; let i = index">
                    <input type="checkbox" class="custom-control-input" [attr.name]="projectType.projectTypeName" [attr.id]="'projectType' + i" (click)="onCheckboxProjectTypeClick($event, projectType.id)">
                    <label class="custom-control-label" [attr.for]="'projectType' + i" style="padding: 3px 0px 0px 10px;">{{ projectType.projectTypeName }}</label>
                  </div>
                </div>
              </div>
      
              <!-- Advanced Project Filters-->
              <div class="adv-filters2-cont">
                <!-- PLC Schedules -->
                <div class="filter-headers" data-toggle="collapse" data-target="#projectPLCStatus">
                  <i class="fa fa-angle-down" aria-hidden="true" style="padding: 0px 10px 0px 3px"></i>
                  PLC Schedule
                </div>
                <div class="filter-collapse show" id="projectPLCStatus">
                  <ng-container *ngFor="let plcStatus of plcStatuses; let l = index">
                    <div class="custom-control custom-checkbox" data-toggle="collapse" data-target="#plcStatusDate">
                      <input type="checkbox" class="custom-control-input" [attr.name]="plcStatus.PLCStatusName" [attr.id]="'plcStatus' + l" (click)="onCheckboxPLCScheduleClick($event, plcStatus)">
                      <label class="custom-control-label" [attr.for]="'plcStatus' + l" style="padding: 3px 0px 0px 10px;">{{ plcStatus.PLCStatusName }}</label>
                    </div>
                      <ng-container id="plcStatusDate" *ngIf="showPLCDate===true">
                        <div class="form-group" style="margin-bottom: 4px;">
                          <label for="plcFrom" class="plc">From</label>
                          <input id="plcFrom" type="date" class="form-control plc">
                        </div>
                        <div class="form-group" style="margin-bottom: 4px;"> 
                          <label for="fteTo" class="plc">To</label>
                          <input id="fteTo" type="date" class="form-control plc">
                        </div>
                      </ng-container>
    
    
                  </ng-container>
    
                </div>
              </div>

              <!-- 2-col Advanced Filter -->
              <div style="width:402px">
                <!-- PLC Schedules -->
                <div class="filter-headers" data-toggle="collapse" data-target="#projectPLCStatus">
                  <i class="fa fa-angle-down" aria-hidden="true" style="padding: 0px 10px 0px 3px"></i>
                  PLC Schedule
                </div>
              </div>
      
            </div> <!-- End Filter Column -->
      
      
          <!-- Results Table Column -->
          <!-- <div class="d-inline-flex"> -->
            <div class="d-inline-flex adv-results-cont">
              <table class="table table-hover filter-results">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Project Name</th>
                    <th scope="col">Type</th>
                    <th scope="col">Priority</th>
                    <th scope="col">Status</th>
                    <th scope="col">Owner</th>
                    <th *ngFor="let plc of arrPLCStatus" scope="col">{{ plc }}</th>              
                  </tr>
                </thead>
                <tbody>
                  <!-- <tr *ngFor="let project of projects | filter : filterString : 'ProjectName': {matchFuzzy: {on: true}};"> -->
                    <tr *ngFor="let project of advancedFilteredResults | filter : filterString : 'ProjectName': {matchFuzzy: {on: true}};">            
                    <td>{{ project.ProjectName }}</td>
                    <td>{{ project.ProjectTypeName }}</td>
                    <td>{{ project.PriorityName }}</td>
                    <td>{{ project.ProjectStatusName }}</td>
                    <td>{{ project.ProjectOwner }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          <!-- </div> -->
      

      
        </div>
      
      </div>
      